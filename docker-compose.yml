version: '3.8'

services:
  chitieu-app:
    container_name: chitieu-app
    build:
      context: .
      dockerfile: Dockerfile
      args:
        DATABASE_URL: ${DATABASE_URL}
        NEXT_PUBLIC_TURNSTILE_SITE_KEY: ${NEXT_PUBLIC_TURNSTILE_SITE_KEY}
    restart: always
    environment:
      # Database Connection
      DATABASE_URL: ${DATABASE_URL}

      # App Secrets
      JWT_SECRET: ${JWT_SECRET}
      TURNSTILE_SECRET_KEY: ${TURNSTILE_SECRET_KEY}

      # Next.js Config
      NODE_ENV: "production"
      HOSTNAME: "0.0.0.0"

    networks:
      - web_network
    ports:
      - "3000:3000"

networks:
  web_network:
    external: true
